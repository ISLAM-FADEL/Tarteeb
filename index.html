<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tarteeb | HTI Color Edition</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Inter:wght@400;600;800&family=Amiri:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --cyan: #22d3ee; --indigo: #6366f1; --dark: #020617;
      --panel: #0f172a; --border: #1e293b; --white: #f8fafc;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
    body { background: var(--dark); color: var(--white); padding: 10px; }

    /* Header */
    .dev-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 12px 20px; background: var(--panel); border: 1px solid var(--border);
      border-radius: 12px; margin-bottom: 20px;
    }
    .dev-title { font-family: 'Fira Code', monospace; color: var(--cyan); font-weight: bold; font-size: 20px; }
    .btn-print-sm { padding: 6px 14px; background: var(--indigo); color: white; border: none; border-radius: 6px; font-size: 11px; font-weight: 700; cursor: pointer; }
    .btn-dev-emoji { background: none; border: 1px solid var(--border); font-size: 16px; cursor: pointer; padding: 4px 8px; border-radius: 6px; transition: 0.3s; }

    .layout { display: flex; gap: 20px; flex-wrap: wrap; }
    
    /* Sidebar */
    .sidebar { flex: 1; min-width: 300px; background: var(--panel); padding: 20px; border-radius: 15px; border: 1px solid var(--border); }
    .sec-title { font-family: 'Fira Code'; font-size: 10px; color: var(--cyan); margin-bottom: 15px; display: block; opacity: 0.7; }
    
    input, select {
      width: 100%; padding: 10px; background: #000; border: 1px solid var(--border);
      border-radius: 6px; color: #fff; margin-bottom: 8px; font-size: 13px;
    }

    /* Main Content */
    .main-content { flex: 3; min-width: 600px; background: var(--panel); padding: 25px; border-radius: 15px; border: 1px solid var(--border); position: relative; }

    .profile-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px; margin-bottom: 20px; padding: 15px; background: rgba(0,0,0,0.3);
      border-radius: 10px; border-left: 3px solid var(--indigo);
    }
    .profile-item label { display: block; font-size: 8px; color: var(--cyan); text-transform: uppercase; }
    .profile-item span { font-weight: 600; font-size: 14px; }

    /* Table */
    .scroll-x { width: 100%; overflow-x: auto; }
    table { width: 100%; border-collapse: separate; border-spacing: 4px; table-layout: fixed; }
    th { font-family: 'Fira Code'; font-size: 9px; color: #64748b; padding-bottom: 8px; }
    .day-head { background: var(--indigo); color: #fff; width: 60px; text-align: center; font-weight: 800; border-radius: 6px; font-size: 11px; }

    /* Card Styling with Dynamic Colors */
    .card {
      border: 1px solid var(--border);
      border-radius: 8px; padding: 8px; height: 100px; display: flex; flex-direction: column;
      justify-content: center; cursor: pointer; gap: 2px;
      transition: transform 0.2s;
    }
    .card:hover { transform: scale(1.02); }
    .card-title { font-weight: 800; font-size: 11px; line-height: 1.1; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
    .card-sub { font-size: 8.5px; color: rgba(255,255,255,0.8); font-weight: 600; }
    .card-code { font-size: 8px; color: rgba(255,255,255,0.9); font-family: 'Fira Code'; margin-top: 3px; background: rgba(0,0,0,0.2); padding: 2px 4px; border-radius: 4px; align-self: flex-start; }

    /* Modal */
    #devModal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center; align-items: center;
    }
    .modal-box { background: var(--panel); padding: 30px; border-radius: 20px; border: 1px solid var(--cyan); width: 320px; text-align: left; }
    .dev-line { background: rgba(0,0,0,0.4); padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid var(--indigo); font-family: 'Fira Code'; font-size: 12px; }

    /* Footer Section */
    .footer-section { margin-top: 15px; text-align: center; }
    .dua { font-family: 'Amiri'; font-size: 20px; color: white; margin-bottom: 5px; }
    .hti-dedication { font-size: 10px; color: #64748b; font-weight: bold; }

    @media print {
      .no-print { display: none !important; }
      body { background: white !important; color: black !important; padding: 0; }
      .main-content { border: none !important; background: white !important; width: 100% !important; padding: 0 !important; }
      .profile-grid { border: 1px solid black !important; margin-bottom: 10px !important; }
      .profile-item span, .profile-item label { color: black !important; }
      table { border: 1px solid black !important; }
      th, td { border: 0.5px solid black !important; color: black !important; }
      .day-head { background: #eee !important; color: black !important; }
      .card { background: transparent !important; border: none !important; border-left: 4px solid black !important; height: 85px !important; }
      .card-title, .card-sub, .card-code { color: black !important; text-shadow: none !important; }
      .card-code { background: none !important; padding: 0 !important; }
      .dua { color: black !important; font-size: 18px !important; margin-top: 5px !important; }
      .hti-dedication { color: black !important; font-size: 9px !important; }
      @page { size: A4 landscape; margin: 0.5cm; }
    }
  </style>
</head>
<body>

<div class="dev-header no-print">
  <div class="dev-title">Tarteeb</div>
  <div style="display:flex; gap:10px; align-items:center;">
    <button onclick="toggleModal(true)" class="btn-dev-emoji">üë®‚Äçüíª</button>
    <button onclick="undo()" class="btn-print-sm" style="background:none; border:1px solid var(--border); color:#94a3b8;">UNDO</button>
    <button onclick="window.print()" class="btn-print-sm">PRINT PDF</button>
  </div>
</div>

<div class="layout">
  <aside class="sidebar no-print">
    <span class="sec-title">// CONFIGURATION</span>
    <input type="text" id="iName" placeholder="Student Name" oninput="sync()">
    <input type="text" id="iID" placeholder="Academic ID" oninput="sync()">
    <input type="text" id="iColl" placeholder="College (HTI)" oninput="sync()">
    <input type="text" id="iDept" placeholder="Department" oninput="sync()">

    <span class="sec-title" style="margin-top:15px;">// ADD COURSE</span>
    <input type="text" id="cTitle" placeholder="Course Title">
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:5px;">
      <input type="text" id="cCode" placeholder="Code">
      <input type="text" id="cHall" placeholder="Hall">
    </div>
    <input type="text" id="cDoc" placeholder="Instructor">
    <select id="day">
      <option value="1">SATURDAY</option><option value="2">SUNDAY</option>
      <option value="3">MONDAY</option><option value="4">TUESDAY</option><option value="5">WEDNESDAY</option>
    </select>
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:5px;">
      <select id="sP"><option value="">START</option></select>
      <select id="eP"><option value="">END</option></select>
    </div>
    <select id="exP"><option value="">EXTRA PERIOD (OPTIONAL)</option></select>

    <button class="btn-print-sm" style="width:100%; padding:12px; margin-top:10px;" onclick="inject()">PUSH TO SCHEDULE</button>
  </aside>

  <main class="main-content">
    <div class="profile-grid">
      <div class="profile-item"><label>Student Name</label><span id="vName">---</span></div>
      <div class="profile-item"><label>College</label><span id="vColl">---</span></div>
      <div class="profile-item"><label>Student ID</label><span id="vID">---</span></div>
      <div class="profile-item"><label>Department</label><span id="vDept">---</span></div>
    </div>

    <div class="scroll-x">
      <table>
        <thead><tr id="hRow"><th>DAYS</th></tr></thead>
        <tbody id="bRows"></tbody>
      </table>
    </div>

    <div class="footer-section">
      <div class="dua">" ŸàÿßŸÑŸÑŸá ŸÅŸä ÿπŸàŸÜ ÿßŸÑÿπÿ®ÿØ ŸÖÿß ŸÉÿßŸÜ ÿßŸÑÿπÿ®ÿØ ŸÅŸä ÿπŸàŸÜ ÿ£ÿÆŸäŸá "</div>
      <div class="hti-dedication">ÿ•ŸáÿØÿßÿ° ŸÖŸÜ ŸÇÿ≥ŸÖ ÿßŸÑŸáŸÜÿØÿ≥ÿ© ÿßŸÑÿ≠ŸäŸàŸäÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ© ÿ®ÿßŸÑŸÖÿπŸáÿØ ÿßŸÑÿ™ŸÉŸÜŸàŸÑŸàÿ¨Ÿä ÿ®ÿßŸÑÿπÿßÿ¥ÿ± ŸÖŸÜ ÿ±ŸÖÿ∂ÿßŸÜ</div>
    </div>
  </main>
</div>

<div id="devModal" class="no-print" onclick="toggleModal(false)">
  <div class="modal-box" onclick="event.stopPropagation()">
    <h3 style="color:var(--cyan); font-family:'Fira Code'; margin-bottom:15px;">[DEVELOPERS]</h3>
    <div class="dev-line">> ISLAM OSMAN AHMED</div>
    <div class="dev-line">> OMAR MEKKI</div>
    <button class="btn-print-sm" style="width:100%; margin-top:20px;" onclick="toggleModal(false)">CLOSE</button>
  </div>
</div>

<script>
  let db = []; let history = [];
  const days = ["SAT", "SUN", "MON", "TUE", "WED"];
  const matrix = ["09:00-09:45", "09:45-10:30", "10:30-11:15", "11:15-12:00", "12:00-12:45", "12:45-01:30", "01:30-02:15", "02:15-03:00"];

  // ÿØÿßŸÑÿ© ŸÑÿ™ŸàŸÑŸäÿØ ŸÑŸàŸÜ ÿ´ÿßÿ®ÿ™ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿßÿØÿ©
  function getCourseColor(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = str.charCodeAt(i) + ((hash << 5) - hash);
    }
    const h = Math.abs(hash) % 360;
    return `hsla(${h}, 70%, 45%, 0.3)`; // ŸÑŸàŸÜ ÿÆŸÑŸÅŸäÿ© ŸáÿßÿØÿ¶
  }

  function getCourseBorder(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = str.charCodeAt(i) + ((hash << 5) - hash);
    }
    const h = Math.abs(hash) % 360;
    return `hsla(${h}, 80%, 60%, 1)`; // ŸÑŸàŸÜ ÿ•ÿ∑ÿßÿ± ÿ®ÿßÿ±ÿ≤
  }

  function init() {
    const s = document.getElementById('sP'), e = document.getElementById('eP'), ex = document.getElementById('exP'), hr = document.getElementById('hRow');
    matrix.forEach((h, i) => {
      const p = i + 1;
      s.innerHTML += `<option value="${p}">${p}</option>`;
      e.innerHTML += `<option value="${p}">${p}</option>`;
      ex.innerHTML += `<option value="${p}">${p}</option>`;
      hr.innerHTML += `<th>P${p}<br><span style="font-size:7px; opacity:0.5">${h}</span></th>`;
    });
    load(); sync(); render();
  }

  function toggleModal(show) { document.getElementById('devModal').style.display = show ? 'flex' : 'none'; }
  function sync() {
    ['Name','ID','Coll','Dept'].forEach(k => document.getElementById('v'+k).innerText = document.getElementById('i'+k).value || '---');
    save();
  }

  function inject() {
    const title = document.getElementById('cTitle').value, sp = parseInt(document.getElementById('sP').value), ep = parseInt(document.getElementById('eP').value), exp = parseInt(document.getElementById('exP').value);
    if(!title) return;
    history.push(JSON.stringify(db));
    let slots = new Set();
    if(sp && ep) for(let i=sp; i<=ep; i++) slots.add(i);
    if(exp) slots.add(exp);
    slots.forEach(slot => {
      db.push({ 
        title, 
        day: parseInt(document.getElementById('day').value), 
        slot, 
        code: document.getElementById('cCode').value, 
        hall: document.getElementById('cHall').value, 
        doc: document.getElementById('cDoc').value 
      });
    });
    render(); save(); 
    document.getElementById('cTitle').value = ""; document.getElementById('cCode').value = "";
  }

  function render() {
    const body = document.getElementById('bRows'); body.innerHTML = "";
    for(let d=1; d<=5; d++) {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td class="day-head">${days[d-1]}</td>`;
      const skip = new Set();
      for(let s=1; s<=8; s++) {
        if(skip.has(s)) continue;
        const item = db.find(n => n.day === d && n.slot === s);
        const td = document.createElement('td');
        if(item) {
          let span = 1;
          for(let nxt=s+1; nxt<=8; nxt++) if(db.find(n => n.day === d && n.slot === nxt && n.title === item.title)) { span++; skip.add(nxt); } else break;
          
          const bgColor = getCourseColor(item.title);
          const borderColor = getCourseBorder(item.title);
          
          td.colSpan = span;
          td.innerHTML = `
            <div class="card" onclick="remove('${item.title}', ${d})" style="background: ${bgColor}; border-left: 4px solid ${borderColor}; border-top: 1px solid ${borderColor}; border-bottom: 1px solid ${borderColor}; border-right: 1px solid ${borderColor};">
              <div class="card-title">${item.title}</div>
              <div class="card-sub">üìç ${item.hall || '--'}</div>
              <div class="card-sub">üë®‚Äçüè´ ${item.doc || '--'}</div>
              <div class="card-code">${item.code || ''}</div>
            </div>`;
        } else td.innerHTML = `<div style="height:100px; border:1px dashed #1e293b; border-radius:8px;"></div>`;
        tr.appendChild(td);
      }
      body.appendChild(tr);
    }
  }

  function remove(t, d) { if(confirm("Remove?")) { history.push(JSON.stringify(db)); db = db.filter(n => !(n.title === t && n.day === d)); render(); save(); } }
  function undo() { if(history.length) { db = JSON.parse(history.pop()); render(); save(); } }
  function save() {
    const p = { n: document.getElementById('iName').value, i: document.getElementById('iID').value, c: document.getElementById('iColl').value, d: document.getElementById('iDept').value };
    localStorage.setItem('tarteeb_color_v1', JSON.stringify({db, p}));
  }
  function load() {
    const s = JSON.parse(localStorage.getItem('tarteeb_color_v1'));
    if(s) {
      db = s.db || [];
      document.getElementById('iName').value = s.p.n || ''; document.getElementById('iID').value = s.p.i || '';
      document.getElementById('iColl').value = s.p.c || ''; document.getElementById('iDept').value = s.p.d || '';
    }
  }
  init();
</script>
</body>
</html>
