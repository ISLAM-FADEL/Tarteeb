<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tarteeb | Biomedical Engineering - HTI</title>
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  
  <style>
    :root{
      --bg0:#0b1020; --bg1:#0f1733; --card:#0f1b3a; --text:#e9ecff;
      --muted:#aab3da; --border:rgba(255,255,255,.10); --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px; --accent:#7c6cff; --secondary:#00d2ff; --danger:#ff4d6d;
    }
    [data-theme="light"]{
      --bg0:#f6f7ff; --bg1:#ffffff; --card: rgba(255,255,255,.85);
      --text:#0b1020; --muted:#4b5563; --border:rgba(15,23,42,.14);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family: 'Inter', sans-serif; color: var(--text);
      min-height: 100vh; background: linear-gradient(145deg, var(--bg0), var(--bg1)); padding: 20px;
    }
    .container{max-width: 1400px; margin: 0 auto;}

    .brand-logo {
      font-family: 'Exo 2', sans-serif; font-weight: 800; font-size: 28px;
      background: linear-gradient(to right, var(--accent), var(--secondary));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      letter-spacing: -1px; position: relative; display: inline-block;
    }
    .brand-logo::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 40%; height: 3px; background: var(--secondary); border-radius: 10px; }

    .topbar{
      display:flex; justify-content:space-between; align-items:center;
      padding: 18px 25px; border: 1px solid var(--border); background: rgba(15,27,58,.65);
      backdrop-filter: blur(12px); border-radius: var(--radius); margin-bottom: 20px;
    }
    .btn{
      border: 1px solid var(--border); background: rgba(255,255,255,.06);
      color: var(--text); padding: 10px 16px; border-radius: 12px; cursor:pointer;
      font-weight:600; font-size: 13px; transition: 0.3s;
    }
    .btn:hover{background: var(--accent); color: white; transform: translateY(-2px);}
    .btn.primary{background: var(--accent); color: white; border: none; box-shadow: 0 4px 15px rgba(124,108,255,0.3);}
    
    .grid{display:grid; grid-template-columns: 320px 1fr; gap:20px;}
    @media (max-width: 1100px){ .grid{grid-template-columns: 1fr;} }
    
    .card{
      border: 1px solid var(--border); background: rgba(15,27,58,.58);
      border-radius: var(--radius); padding: 22px; box-shadow: var(--shadow);
    }
    input, select{
      width:100%; background: rgba(255,255,255,.04); color: var(--text);
      border: 1px solid var(--border); padding: 12px; border-radius: 12px; margin: 6px 0; outline: none;
    }

    .tableWrap{ border: 1px solid var(--border); border-radius: 14px; overflow-x: auto; background: rgba(0,0,0,0.1); }
    table{width:100%; border-collapse: collapse; text-align: center; min-width: 1000px;}
    th, td{padding: 12px; border: 1px solid rgba(255,255,255,.05);}
    th{background: rgba(255,255,255,.03); color: var(--muted); font-size: 11px; text-transform: uppercase;}
    
    .day-td{ background: rgba(124,108,255,0.05); color: var(--accent); font-weight: 800; width: 100px; font-size: 13px;}
    .time-header{ font-size: 10px; line-height: 1.2; color: var(--muted);}

    .course-pill{
      background: linear-gradient(135deg, rgba(124,108,255,0.2), rgba(0,210,255,0.1));
      border-top: 3px solid var(--accent);
      padding: 12px 5px; border-radius: 8px; cursor: pointer;
      min-height: 60px; display: flex; flex-direction: column; align-items: center; justify-content: center;
      transition: 0.2s;
    }
    .c-name { font-weight: 700; font-size: 12px; }
    .c-doc { font-size: 10px; opacity: 0.7; font-style: italic; margin-top: 4px; }

    @media print {
      body { background: white !important; color: black !important; padding: 10px; }
      .topbar, .actions, .sidebar-form, .btn { display: none !important; }
      .grid { display: block !important; }
      .card { border: none !important; background: white !important; box-shadow: none !important; padding: 0 !important; }
      .tableWrap { border: 2px solid #000 !important; border-radius: 0 !important; overflow: visible !important;}
      table { min-width: 100% !important; border: 1px solid #000 !important;}
      th, td { border: 1px solid #000 !important; color: black !important; padding: 8px !important; }
      .day-td { background: #eee !important; color: black !important; }
      .course-pill { background: #f2f2f2 !important; border-top: 4px solid black !important; color: black !important; }
      .student-info-print { display: block !important; }
      .print-footer { display: block !important; position: fixed; bottom: 0; width: 100%; text-align: center; border-top: 1px solid #000; padding: 10px 0; }
    }
    .student-info-print, .print-footer { display: none; }
    .modalBack{ position:fixed; inset:0; background:rgba(0,0,0,0.8); display:none; align-items:center; justify-content:center; z-index:100; backdrop-filter: blur(5px); }
    .modal{ background: var(--bg1); border: 1px solid var(--accent); padding: 40px; border-radius: 25px; width: 400px; text-align: center; }
  </style>
</head>
<body>

<div class="container">
  <div class="student-info-print" id="printHeader">
    <div style="text-align: center; margin-bottom: 15px;">
      <h1 style="font-size: 32px; font-family: 'Exo 2'; color: black; margin: 0;">TARTEEB</h1>
      <p style="font-size: 12px; font-weight: bold; letter-spacing: 2px;">BIOMEDICAL ENGINEERING DEPARTMENT - HTI</p>
    </div>
    <div id="printDetails" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 13px; border: 1.5px solid #000; padding: 12px; margin-bottom: 15px;"></div>
  </div>

  <div class="topbar">
    <div>
      <div class="brand-logo">Tarteeb</div>
      <p style="color: var(--muted); font-size: 11px; margin-top: 2px; font-weight: 600;">HTI | BIOMEDICAL ENGINEERING</p>
    </div>
    <div class="actions">
      <button class="btn" onclick="toggleTheme()" id="themeBtn">ğŸŒ™ Dark</button>
      <button class="btn" onclick="toggleDev(true)">ğŸ‘¨â€ğŸ’» Developers</button>
      <button class="btn" onclick="undo()">â†©ï¸ Undo</button>
      <button class="btn primary" onclick="printSchedule()">ğŸ–¨ï¸ PDF Print</button>
    </div>
  </div>

  <div class="grid">
    <section class="card sidebar-form">
      <h3 style="margin-bottom: 10px; font-size: 15px; color: var(--accent);">Student Info</h3>
      <input type="text" id="stdName" placeholder="Full Name">
      <input type="text" id="stdID" placeholder="Student ID">
      <input type="text" id="stdCollege" placeholder="College">
      <input type="text" id="stdDept" placeholder="Department">
      
      <hr style="margin: 15px 0; opacity: 0.1;">
      
      <h3 style="margin-bottom: 10px; font-size: 15px; color: var(--accent);">Add Course</h3>
      <input type="text" id="courseName" placeholder="Course Title">
      <input type="text" id="courseDoc" placeholder="Instructor / Doctor">
      <select id="daySelect">
        <option value="1">Saturday</option><option value="2">Sunday</option>
        <option value="3">Monday</option><option value="4">Tuesday</option><option value="5">Wednesday</option>
      </select>
      
      <div style="display: flex; gap: 8px;">
        <select id="startSlot"><option value="">Start</option></select>
        <select id="endSlot"><option value="">End</option></select>
      </div>
      <label style="font-size: 11px; color: var(--muted); margin-top:8px; display:block;">Extra Period:</label>
      <select id="extraSlot"><option value="">None</option></select>

      <button class="btn primary" style="width: 100%; margin-top: 15px;" onclick="addCourse()">â• Add to Table</button>
      <button class="btn" style="width: 100%; margin-top: 8px; border-color:var(--danger); color:var(--danger);" onclick="clearAll()">ğŸ§¹ Clear All</button>
    </section>

    <section class="card" style="padding: 0; overflow: hidden;">
      <div class="tableWrap">
        <table>
          <thead>
            <tr id="timeHeaderRow">
              <th>Day / Period</th>
            </tr>
          </thead>
          <tbody id="scheduleBody"></tbody>
        </table>
      </div>
    </section>
  </div>

  <div class="print-footer">
    <p style="font-style: italic; font-size: 14px; margin-bottom: 8px;">( ÙˆØ§Ù„Ù„Ù‡ ÙÙŠ Ø¹ÙˆÙ† Ø§Ù„Ø¹Ø¨Ø¯ Ù…Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ø¨Ø¯ ÙÙŠ Ø¹ÙˆÙ† Ø£Ø®ÙŠÙ‡ )</p>
    <p style="font-weight: 800; font-size: 13px; color: #000;">Ø¥Ù‡Ø¯Ø§Ø¡ Ù…Ù† Ù‚Ø³Ù… Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ø§Ù„Ø·Ø¨ÙŠØ© Ø¨Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠ Ø¨Ø§Ù„Ø¹Ø§Ø´Ø± Ù…Ù† Ø±Ù…Ø¶Ø§Ù†</p>
  </div>
</div>

<div id="devModal" class="modalBack">
  <div class="modal">
    <div style="font-family: 'Exo 2'; font-size: 32px; color: var(--accent);">Tarteeb</div>
    <p style="margin: 20px 0;">ğŸš€ <b>Islam Osman Ahmed</b> & <b>Omar Mekki</b></p>
    <hr style="opacity:0.1; margin: 15px 0;">
    <p style="font-size: 12px; color: var(--muted);">Higher Technological Institute</p>
    <p style="font-size: 12px; color: var(--muted);">10th of Ramadan City</p>
    <button class="btn primary" style="width: 100%; margin-top: 20px;" onclick="toggleDev(false)">Close</button>
  </div>
</div>

<script>
  let courses = [];
  let historyStack = [];
  const daysLabels = ["Saturday", "Sunday", "Monday", "Tuesday", "Wednesday"];
  const times = ["08:30-09:15", "09:15-10:00", "10:00-10:45", "11:00-11:45", "11:45-12:30", "12:30-01:15", "01:30-02:15", "02:15-03:00", "03:00-03:45"];

  function init() {
    const s = document.getElementById('startSlot'), e = document.getElementById('endSlot'), ex = document.getElementById('extraSlot'), thr = document.getElementById('timeHeaderRow');
    for(let i=1; i<=9; i++) {
      s.innerHTML += `<option value="${i}">${i}</option>`;
      e.innerHTML += `<option value="${i}">${i}</option>`;
      ex.innerHTML += `<option value="${i}">${i}</option>`;
      thr.innerHTML += `<th>P${i}<div class="time-header">${times[i-1]}</div></th>`;
    }
    loadState(); render();
  }

  function addCourse() {
    const name = document.getElementById('courseName').value.trim();
    const doc = document.getElementById('courseDoc').value.trim();
    const day = parseInt(document.getElementById('daySelect').value);
    const start = parseInt(document.getElementById('startSlot').value);
    const end = parseInt(document.getElementById('endSlot').value);
    const extra = parseInt(document.getElementById('extraSlot').value);

    if(!name || (!start && !extra)) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©!");

    let requested = [];
    if(start && end) for(let i=start; i<=end; i++) requested.push(i);
    if(extra) requested.push(extra);

    for(let slot of requested) {
      const conflict = courses.find(c => c.day === day && c.slot === slot);
      if(conflict) return alert(`ØªØ¶Ø§Ø±Ø¨: Ù…Ø§Ø¯Ø© ${conflict.name} ØªØ´ØºÙ„ Ø§Ù„ÙØªØ±Ø© P${slot}`);
    }

    saveHistory();
    requested.forEach(s => courses.push({ name, doc, day, slot: s }));
    render(); saveState();
    document.getElementById('courseName').value = "";
    document.getElementById('courseDoc').value = "";
  }

  function render() {
    const tbody = document.getElementById('scheduleBody');
    tbody.innerHTML = "";

    for(let d=1; d<=5; d++) {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td class="day-td">${daysLabels[d-1]}</td>`;
      const skip = new Set();

      for(let s=1; s<=9; s++) {
        if(skip.has(s)) continue;
        const td = document.createElement('td');
        const item = courses.find(c => c.day === d && c.slot === s);
        
        if(item) {
          let span = 1;
          for(let next = s+1; next <= 9; next++) {
            if(courses.find(c => c.day === d && c.slot === next && c.name === item.name)) {
              span++; skip.add(next);
            } else break;
          }
          td.colSpan = span;
          td.innerHTML = `
            <div class="course-pill" onclick="deleteItem('${item.name}', ${d})">
              <span class="c-name">${item.name}</span>
              ${item.doc ? `<span class="c-doc">Dr. ${item.doc}</span>` : ''}
            </div>`;
        } else {
          td.innerHTML = `<span style="opacity:0.1">-</span>`;
        }
        tr.appendChild(td);
      }
      tbody.appendChild(tr);
    }
  }

  function printSchedule() {
    const details = document.getElementById('printDetails');
    details.innerHTML = `
      <div><b>Student:</b> ${document.getElementById('stdName').value || '---'}</div>
      <div><b>ID:</b> ${document.getElementById('stdID').value || '---'}</div>
      <div><b>Institute:</b> HTI - 10th of Ramadan</div>
      <div><b>Dept:</b> ${document.getElementById('stdDept').value || 'Biomedical Engineering'}</div>
    `;
    window.print();
  }

  function deleteItem(name, day) {
    if(confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù…Ø§Ø¯Ø© ${name}ØŸ`)) {
      saveHistory();
      courses = courses.filter(c => !(c.name === name && c.day === day));
      render(); saveState();
    }
  }

  function toggleTheme() {
    const html = document.documentElement;
    if(html.hasAttribute('data-theme')) {
      html.removeAttribute('data-theme'); document.getElementById('themeBtn').innerText = "ğŸŒ™ Dark";
    } else {
      html.setAttribute('data-theme', 'light'); document.getElementById('themeBtn').innerText = "â˜€ï¸ Light";
    }
  }

  function toggleDev(s) { document.getElementById('devModal').style.display = s ? 'flex' : 'none'; }
  function saveHistory() { historyStack.push(JSON.stringify(courses)); }
  function undo() { if(historyStack.length) { courses = JSON.parse(historyStack.pop()); render(); saveState(); } }
  function clearAll() { if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ")) { courses = []; render(); saveState(); } }
  
  function saveState() {
    const student = { n: document.getElementById('stdName').value, i: document.getElementById('stdID').value, c: document.getElementById('stdCollege').value, d: document.getElementById('stdDept').value };
    localStorage.setItem('tarteeb_hti_final', JSON.stringify({courses, student}));
  }
  function loadState() {
    const data = JSON.parse(localStorage.getItem('tarteeb_hti_final'));
    if(data) {
      courses = data.courses || [];
      document.getElementById('stdName').value = data.student.n || '';
      document.getElementById('stdID').value = data.student.i || '';
      document.getElementById('stdCollege').value = data.student.c || '';
      document.getElementById('stdDept').value = data.student.d || '';
    }
  }
  init();
</script>
</body>
</html>
